{% extends "company/layout.html"%}

{% block body %}
<div class="container">
    <div class="d-flex justify-content-between border-bottom mt-4 pb-3">
        <div id="name">
            <h2>
                <span  class="jDetail">{{job.code}}</span>
                <input id="code" class="inputUpdate form-control form-control-lg" style="display: none;" type="text" value="{{product.nameP}}">
                <span class="codeId" hidden>{{code.id}}</span>
            </h2>
        </div>
        <div class="d-flex align-items-center justify-content-between">
            <!-- <button class="btn btn-outline-primary btn-sm mx-2" id="editProduct">Edit Job</button> -->
            <button class="btn btn-outline-danger btn-sm" id="deleteJob">Delete</button>
        </div>
    </div>

    <div id="productDetails" class="row mt-3 border-bottom">
        <div class="border-bottom col-12 row pb-2">
            <div class="col-md-6">
                <h5>
                    Client:  
                    <span class="text-info jDetail">{{job.client}}</span>
                    
                </h5>
                <h5>
                    Value: 
                    <span class="text-info jDetail">{{job.value}}</span> 
                    <input id="brand" class="inputUpdate form-control" style="display: none;" type="text" value="{{product.brand}}"> 
                </h5>
            </div>
            <div class="col-md-6">
                <h2 class="form-group row">
                    <!-- Status:  -->
                    <label for="status" class="col-md-2 col-form-label">Status</label>
                    <!-- <span class="text-info jDetail">{{job.status}}</span> -->
                    <div class="col-sm-4 row align-items-center">
                        <select id="status" class="inputUpdate form-control">
                            {% for status in status %}
                                {%if job.status == status %}
                                    <option value="{{job.status}}" selected>{{status}}</option>
                                {%else%}
                                    <option value="{{status}}">{{status}}</option>
                                {%endif%}    
                            {%endfor%}
                          </select>
                    </div>
                </h2>
            </div> 
        </div>
    </div>

    <div class="card mt-3" id="productsSection">
        <div class="card-header d-flex justify-content-between">
            <h5>Job Products</h5>
        </div>
        <div class="mt-2 mx-2">
            <p class="text-info">Click Searched Item to Place the Item into the Product List</p> 
        </div>
        <div class="d-flex justify-content-between  m-2">
            <div class="col-sm-6">
                <input class="filterInput col-12 form-control" type="text" placeholder="Search Product">
                <ul class="list-group list-group-flush" id="searchList"></ul>
            </div>
        </div>
        <div class="table-responsive my-4" id="products">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                  <tr>
                    <th scope="col" style="width:3%" class="text-center">#</th>
                    <th scope="col" style="width:20%" class="text-center">Name</th>
                    <th scope="col" style="width:18%" class="text-center">Category</th>
                    <th scope="col" style="width:18%" class="text-center">QTY</th>
                    <th scope="col" style="width:18%" class="text-center">Price</th>
                    <th scope="col" style="width:18%" class="text-center">Total</th>
                    <th scope="col" class="text-center">Action</th>
                  </tr>
                </thead>
                <tbody id="productTable">
                    {% for product in products %}
                        <tr id="{{product.id}}">
                            <th scope="row" class="rowCounter text-center"></th>
                            <td id="name" class="text-center" >{{product.nameP}} : {{product.brand}} </td>
                            <td id="category" class="text-center">{{product.category}}</td>
                            <td id="qty" class="text-center">{{product.category}}</td>
                            <td id="price" class="text-center">{{product.category}}</td>
                            <td id="total" class="text-center">{{product.category}}</td>
                            <td class="d-flex justify-content-center">
                                <button id="editButton" class="pr-1 btn btn-lg text-dark" >
                                    <i class="far fa-edit"></i>
                                </button>
                                <button id="deleteButton" class="pl-0 btn btn-lg text-dark">
                                    <i class="far fa-trash-alt"></i>
                                </button>
                            </td>
                        </tr>
                    {% endfor %}
                    <tr id="hiddenRow" style="display: none;">
                        <th scope="row" class="rowCounter text-center"></th>
                        <td class="text-center">
                            <input type="text" class="productName form-control filterInput">
                            <ul class="list-group list-group-flush" id="searchList"></ul>
                        </td>
                        <td class="text-center"><input type="text" class="category form-control"></td>
                        <td class="text-center"><input type="text" class="qty form-control"></td>
                        <td class="text-center"><input type="text" class="price form-control"></td>
                        <td class="text-center"><input type="text" class="total form-control"></td>
                        <td class="d-flex justify-content-center">
                            <button id="saveProduct" class="pr-1 btn btn-lg text-dark" >
                                <i class="fa fa-check"></i>
                            </button>
                            <button id="cancelButton" class="pl-0 btn btn-lg text-dark">
                                <i class="fa fa-ban"></i>
                            </button>
                        </td>    
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="d-flex flex-row-reverse m-2">
            <button class="btn btn-primary" id="addProduct">Add Product</button>
        </div>

    </div>
    
{%endblock%}

{% load static %}
{% block scripttag%}
<script src="{% static 'company/jobDetails.js' %}"></script>
{%endblock%}