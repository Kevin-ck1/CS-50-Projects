{% extends "company/layout.html" %}

{% block body %}

<div class="container">
    <div class="d-flex justify-content-between border-bottom mt-4 pb-3">
        <div id="name">
            <h2>
                <span  class="sName">{{supplier.nameS}}</span>
            </h2>
        </div>
        <div class="d-flex align-items-center justify-content-between">
            <button class="btn btn-outline-primary btn-sm mx-2" id="editsupplier">Edit Supplier</button>
            <button class="btn btn-outline-danger btn-sm" id="deletesupplier">Delete</button>
        </div>
    </div>
    <div class="modal1">
        <div class="modal-content1 d-flex justify-content-center">
            <div class="col-md-10">
                
                <div class="mb-4 d-flex justify-content-between">
                    <div></div>
                    <h5 class="text-center">Edit Supplier</h5>
                    <span class="closeButton">X</span>
                </div>
                <hr>
                <div>
                    <form id="supplierForm">
                        <div class="form-group row ">
                            <label for="nameS" class="col-sm-2 col-form-label">Supplier's Name</label>
                            <div class="col">
                              <input type="text" class="form-control" id="nameS" value="{{supplier.nameS}}">
                            </div>
                        </div>
                
                        <div class="form-group row mt-3">
                            <label for="address" class="col-sm-2 col-form-label">Address</label>
                            <div class="col">
                              <input type="text" class="form-control" id="address" value="{{supplier.address}}">
                            </div>
                        </div>
                
                        <div class="form-group row mt-3">
                          <label for="email" class="col-sm-2 col-form-label">Email</label>
                          <div class="col">
                            <input type="text" class="form-control" id="email" value="{{supplier.email}}">
                          </div>
                        </div>
                
                        <div class="form-group row mt-3">
                            <label for="contact" class="col-sm-2 col-form-label">Contact</label>
                            <div class="col">
                              <input type="text" class="form-control" id="contact" value="{{supplier.contact}}">
                            </div>
                        </div>
                
                        <div class="form-group row mt-3">
                            <label for="Zone" class="col-sm-2 col-form-label">Zone</label>
                            <div class="col">
                              <select name="" id="zone">
                                  {% for zone in zones %}
                                    {%if supplier.zone == forloop.counter  %}
                                        <option value="{{ supplier.zone }}" selected>{{zone}}</option>
                                    {%else%}
                                        <option value="{{ forloop.counter }}">{{zone}}</option>
                                    {%endif%}
                                  {%endfor%}
                                  
                              </select>
                            </div>
                        </div>
                
                        <div class="form-group row mt-3">
                            <label for="location" class="col-sm-2 col-form-label">Location</label>
                            <div class="col">
                              <input type="text" class="form-control" id="location" value="{{supplier.location}}">
                            </div>
                        </div>
                       
                        <div class="submit mt-3 d-flex flex-row-reverse">
                            <button class="btn btn-primary submitButton" type="submit" value="edit">Save Changes</button>
                        </div>   
                
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div id="supplierDetails" class="row mt-3 border-bottom">
        <div class="border-bottom col-12 row pb-2">
            <h5 class="col-md-4">
                Address
                <span class="text-info sAddress">{{supplier.address}}</span>
            </h5>
            <h5 class="col-md-4">
                Email: 
                <span class="text-info sEmail">{{supplier.email}}</span>
            </h5>
            <h5 class="col-md-4">
                Contact: 
                <span class="text-info sContact">{{supplier.contact}}</span>
        </div>

        <div class="col-12 pt-1 row">
            <h5 class="col-md-4">
                Zone: 
                <span class="text-info sZone">{{supplier.zone}}</span> 
            </h5>
            
            <h5 class="col-md-6">
                Location: 
                <span class="text-info sLocation">{{supplier.location}}</span> 
            </h5>
        </div>  
        
        <div class="col-12">
            <input id="updatesupplier" class="btn btn-primary inputUpdate" style="display: none;" type="submit" value="Update supplier">
        </div>
    </div>

    <div class="card mt-3">
        <h5 class="card-header">Personnel Details</h5>
        <div class="table-responsive my-4">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                  <tr>
                    <th scope="col" style="width:3%" class="text-center">#</th>
                    <th scope="col" style="width:30%" class="text-center">Name</th>
                    <th scope="col" style="width:30%" class="text-center">Phone</th>
                    <th scope="col" style="width:30%" class="text-center">Email</th>
                    <th scope="col" class="text-center">Action</th>
                  </tr>
                </thead>
                <tbody id="personnelTable">
                    {% for person in personnel %}
                        <tr id="{{person.id}}">
                            <th scope="row" class="rowCounter text-center"></th>
                            <td id="name" class="text-center" >{{person.nameC}}</td>
                            <td id="phone" class="text-center">{{person.contact}}</td>
                            <td id="email" class="text-center">{{person.email}}</td>
                            <td class="d-flex justify-content-center">
                                <button id="editButton" class="pr-1 btn btn-lg text-dark" >
                                    <i class="far fa-edit"></i>
                                </button>
                                <button id="deleteButton" class="pl-0 btn btn-lg text-dark">
                                    <i class="far fa-trash-alt"></i>
                                </button>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="d-flex flex-row-reverse m-1">
            <button class="btn btn-primary" id="addPerson">Add Personnel</button>
        </div>
    </div>
</div>

{%endblock%}

{% load static %}
{% block scripttag%}
<script src="{% static 'company/supplier.js' %}"></script>
<script src="{% static 'company/supplierDetails.js' %}"></script>
{%endblock%}
